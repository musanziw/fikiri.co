<section class="px-8 mt-20 mb-10 max-w-screen-lg mx-auto" *ngIf="vm$ | async as vm">
  @if (vm.events; as events) {
    <h1 class="text-xl md:text-2xl lg:text-3xl font-semibold mb-6">
      Appels <span class="inline-block after:block after:w-full after:h-1 after:-mt-2 after:bg-green-400">fikiri</span>
    </h1>
    <div class="">
      @for (event of events; track event.id) {
        <div class="grid grid-cols-1 md:grid-cols-2 mb-10">
          <div class="relative w-full h-48 md:h-full mt-5 lg:mt-0">
            @for (image of event.images; track $index) {
              <img
                [ngClass]="$index === currentImageIndex ? 'opacity-100' : 'opacity-0'"
                [ngSrc]="displayImage(image)"
                alt="hero"
                class="object-cover transition-opacity duration-300"
                fill />
            }

            <button
              class="absolute top-1/2 -left-4 shadow-lg p-2 z-40 rounded-full bg-green-300 cursor-pointer disabled:bg-green-300/60 disabled:cursor-not-allowed"
              [disabled]="isFirstImage()"
              (click)="prevImage()">
              <svg xmlns="http://www.w3.org/2000/svg" class="bi bi-arrow-left h-4 w-4 fill-black" viewBox="0 0 16 16">
                <path
                  fill-rule="evenodd"
                  d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8" />
              </svg>
            </button>

            <button
              [disabled]="isLastImage(event.images)"
              class="absolute top-1/2 -right-4 shadow-lg p-2 rounded-full bg-green-300 cursor-pointer disabled:bg-green-300/60 disabled:cursor-not-allowed"
              (click)="nextImage(event.images)">
              <svg xmlns="http://www.w3.org/2000/svg" class="bi bi-arrow-right h-4 w-4 fill-black" viewBox="0 0 16 16">
                <path
                  fill-rule="evenodd"
                  d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8" />
              </svg>
            </button>
          </div>

          <div class="flex flex-col justify-center items-start bg-green-200/50 gap-4 gap-x-6 p-8 lg:py-16 lg:px-10">
            <h2 class="text-lg md:text-xl font-semibold mb-3">
              {{ event.name }}
            </h2>
            <p class="mb-3">
              {{ event.description }}
            </p>
          </div>
        </div>
      }
    </div>
  }
</section>
