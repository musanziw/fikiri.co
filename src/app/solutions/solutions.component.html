<div class="relative" *ngIf="vm$ | async as state">
  <style>
    .pagination ::ng-deep .ngx-pagination .current {
      background-color: rgb(74 222 128 / 0.7);
      color: white;
      font-size: large;
    }

    .pagination ::ng-deep .ngx-pagination a {
      color: #4a4a4a;
      font-size: large;
      background: hsla(0, 0%, 97%, 0.92);
      display: inline-block;
      margin: 0 2px;
      box-shadow:
        0 1px 0 rgba(255, 255, 255, 0.5) inset,
        0 1px 2px rgba(0, 0, 0, 0.1);
    }
  </style>
  <div class="p-8 text-gray-600 border-x border-dashed lg:mx-auto lg:max-w-screen-lg">
    <h2 class="text-xl md:text-2xl mb-8 text-gray-950 font-bold pt-20 md:w-2/3">
      Les solutions innovantes de
      <span class="inline-block after:block after:w-full after:h-2 after:-mt-2 after:bg-green-300"
        >la communauté.
      </span>
    </h2>
    <div class="grid grid-cols-1 gap-x-6 gap-y-10 md:grid-cols-3 lg:grid-cols-4">
      @for (
        solution of state.solutions | paginate: { itemsPerPage: 20, currentPage, totalItems: state.count };
        track solution.id
      ) {
        <app-solution-card [solution]="solution" />
      }
      @if (state.isLoading && state.solutions.length <= 0) {
        @for (i of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]; track $index) {
          <app-solution-card-skeleton />
        }
      }
    </div>
    @if (state.solutions.length <= 0 && state.isLoading === false) {
      <div class="flex justify-center items-center mt-20">
        <p class="text-gray-600 text-center text-xl font-bold">Aucune solution trouvée sur cette page.</p>
      </div>
    }
    <div class="flex justify-center items-center mt-20">
      <pagination-controls
        nextLabel=""
        previousLabel=""
        [maxSize]="6"
        (pageChange)="onPageChange($event)"
        class="pagination">
      </pagination-controls>
    </div>
  </div>
</div>
