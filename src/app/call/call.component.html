<ng-container *ngIf="state$ | async as state">
  @if (state.callResponse?.call; as call) {
    <div class="flex flex-col text-lg mx-6 justify-center max-w-screen-md md:mx-auto border-x border-dashed pt-20">
      <div class="p-4 flex flex-col gap-4">
        <h2 class="font-bold text-gray-800 text-2xl mb-4">Appel à solutions</h2>
        <h2 class="text-xl text-gray-950 mb-3">
          {{ call.name | capitalizeFirstLetter }}
        </h2>

        <div class="mb-8">
          <youtube-player class="h-screen w-screen" videoId="Pq28wgrdyA0"/>
        </div>

        <h2 class="font-bold text-gray-950 text-xl">Durée de l'appel</h2>
        <p class="text-gray-800">
          Date de début : {{ call.startedAt | date : "dd/MM/yyyy" }}
        </p>
        <p class="text-gray-800 mb-2">
          Date de fin : {{ call.endedAt | date : "dd/MM/yyyy" }}
        </p>
      </div>
      <div class="p-4">
        <h2 class="font-bold text-gray-950 text-xl mb-6">Les thématiques</h2>
        <div class="flex flex-col gap-4">
          @for (thematic of call.thematics; track thematic.id) {
            <p class="mr-2">&mdash; {{ thematic.name }}</p>
          }
        </div>
      </div>

      <div class="flex justify-between mb-8 pt-8 px-8 border-t">
        <button
          [disabled]="!state.callResponse?.prev"
          (click)="loadPrevOrNext(state.callResponse?.prev)"
          class="font-medium text-sm flex items-center text-indigo-600 justify-center gap-1 disabled:text-gray-600 disabled:cursor-not-allowed">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            class="bi bi-chevron-double-left w-3 h-3"
            viewBox="0 0 16 16">
            <path
              fill-rule="evenodd"
              d="M8.354 1.646a.5.5 0 0 1 0 .708L2.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"
            />
            <path
              fill-rule="evenodd"
              d="M12.354 1.646a.5.5 0 0 1 0 .708L6.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"
            />
          </svg>
          Précédent
        </button>

        <button
          [disabled]="!state.callResponse?.next"
          (click)="loadPrevOrNext(state.callResponse?.next)"
          class="font-medium text-sm flex items-center text-indigo-600 justify-center gap-1 disabled:text-gray-600 disabled:cursor-not-allowed">
          Suivant
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            class="bi bi-chevron-double-right w-3 h-3"
            viewBox="0 0 16 16">
            <path
              fill-rule="evenodd"
              d="M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708"
            />
            <path
              fill-rule="evenodd"
              d="M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708"
            />
          </svg>
        </button>
      </div>
    </div>
  }
  @if (!state.isLoading && !state.callResponse?.call) {
    <component-not-found title="404" description="Page non trouvée" link="/" linkText="Retour à l'accueil"/>
  }
</ng-container>
